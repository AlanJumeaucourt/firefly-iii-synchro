<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Main script &#8212; Firefly-III-synchro  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Firefly III API Script" href="utils.html" />
    <link rel="prev" title="Firefly-III-synchro" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="main-script">
<span id="main"></span><h1>Main script<a class="headerlink" href="#main-script" title="Link to this heading">¶</a></h1>
<p>The <cite>main</cite> module serves as the entry point of the Firefly III Synchronization Tool. It orchestrates various components of the application, managing the flow of operations from initialization to execution.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The main module initializes key components such as the Firefly III API wrapper and the Kresus instance. It handles the entire workflow, including testing the Firefly API, fetching and processing data from Kresus, synchronizing data with Firefly III, and updating local data.</p>
</section>
<section id="workflow">
<h2>Workflow<a class="headerlink" href="#workflow" title="Link to this heading">¶</a></h2>
<p>The workflow in the <cite>main</cite> module includes:</p>
<ul class="simple">
<li><p>Setting up logging for the application.</p></li>
<li><p>Loading environment variables from a <cite>.env</cite> file or falling back to default values.</p></li>
<li><p>Initializing the <cite>FireflyIIIAPI</cite> with configuration details.</p></li>
<li><p>Performing a full test of the Firefly API.</p></li>
<li><p>Initializing the <cite>Kresus</cite> instance and checking Kresus data against Firefly III.</p></li>
<li><p>Parsing account and transaction data from Kresus.</p></li>
<li><p>Updating local data and synchronizing it with Firefly III.</p></li>
<li><p>Optionally, exporting transaction data to a CSV file.</p></li>
</ul>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h2>
<p>The main script primarily focuses on orchestrating the application flow:</p>
</section>
<section id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Link to this heading">¶</a></h2>
<p>The main script is executed to run the application:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>This command initiates the various functionalities encapsulated within the <cite>main</cite> function, leveraging the different modules and classes of the application.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>The script uses variables for configuration, loaded from a <cite>.env</cite> file then from environment (prefixed with <cite>F3S_</cite>) . It falls back to default values if these variables are not set:</p>
<p>In the .env file :</p>
<ul class="simple">
<li><p><cite>FIREBASE_URL</cite>: The base URL of the Firefly III instance.</p></li>
<li><p><cite>API_TOKEN</cite>: The API token for Firefly III.</p></li>
</ul>
<p>If you want to use environment variables instead, prefixe them with <cite>F3S_</cite> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">F3S_FIREBASE_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://your-firefly-instance.com/api/v1&#39;</span>
</pre></div>
</div>
<p>These variables are essential for the initialization and operation of the <cite>FireflyIIIAPI</cite>.</p>
</section>
<section id="note">
<h2>Note<a class="headerlink" href="#note" title="Link to this heading">¶</a></h2>
<p>The <cite>main</cite> module is crucial for understanding the overall flow and execution of the application. It combines various aspects of the tool into a coherent workflow, demonstrating how they interact in a real-world scenario.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Firefly-III-synchro</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Firefly-III-synchro</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Main script</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Firefly III API Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="firefly_api.html">Firefly III API Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="kresus.html">Kresus Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Data Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging_config.html">Logging Configuration</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">Firefly-III-synchro</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">Firefly-III-synchro</a></li>
      <li>Next: <a href="utils.html" title="next chapter">Firefly III API Script</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Alan.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/main.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>